---
title: "[Assembly] 1-11. 배열과 주소"
excerpt: "배열과 주소에 대해 알아본다."

categories:
  - cpp
tags:
  - [iteration]

toc: true
toc_sticky: true

date: 2022-03-06
last_modified_at: 2022-03-06
---

## 배열
배열은 동일한 타입의 데이터 묶음을 말한다. 배열과 관련된 핵심 개념 두 가지로 다음이 있다.
* `요소(element)` : 배열을 구성하는 각 값을 배열 요소(element)라고 한다.
* `인덱스(index)` : 배열 요소의 위치를 가리키는 숫자

```nasm
; 배열 예제

section .data
    msg db 'Hello World', 0x00
    a db 1, 2, 3, 4, 5, 6
    b times 5 dw 1              ; 초기값이 1인 2바이트 요소 5개의 배열 b를 만든다
```

`msg`, `a`, `b` 모두 각자 동일한 타입의 데이터로 나열된 배열이다.
* `msg`는 문자열의 끝을 알리는 0x00까지 포함해 총 12바이트 크기의 배열이다.
* `a`는 1바이트가 6개 모인 총 6바이트 크기의 배열이다.
* `b`는 2바이트가 5개 모인 총 10바이트 크기의 배열이다.

## 주소
메모리로 저장하는 곳에는 각각 주소값이 존재한다. 변수의 이름은 사용자가 식별하기 좋도록 지어준 것일 뿐이다.
배열의 각 요소에 접근하는 법은 다음과 같다.

```nasm
    mov rax, a          ; rax에 a의 주소값이 들어감 (rax = 0x403000)

    PRINT_HEX 1, [a]    ; a의 첫 번째 요소 값을 출력 (0x01)
    PRINT_HEX 1, [a+1]  ; a의 두 번째 요소 값을 출력 (0x02)
    PRINT_HEX 1, [a+2]  ; a의 세 번째 요소 값을 출력 (0x03)

    PRINT_HEX 2, [b]    ; b의 첫 번째 요소 값을 출력 (0x01)
    PRINT_HEX 2, [b+1]  ; 잘못된 접근. 리틀 엔디안에 의해 (0x100)
    PRINT_HEX 2, [b+2]  ; b의 두 번째 요소 값을 출력 (0x01)


section .data
    a db 0x01, 0x02, 0x03, 0x04, 0x05
    b times 5 dw 1
```

특정한 배열의 요소에 접근하기 위해서는 `[시작 주소 + (인덱스 * 데이터 크기)]`임을 알 수 있다.